# 光伏发电理论vs实际性能分析系统

## 📋 项目概述

本项目是**问题1**的解决方案，旨在深入理解光伏电站的发电行为。通过建立太阳辐照理论模型，计算光伏电站在理想状态下"应该"发出的电量（理论功率），然后与实际发电量进行对比分析，揭示光伏发电功率的特点。

## 🎯 核心功能

### 1. 太阳辐照理论模型
- **太阳位置计算**: 基于地理位置和时间计算太阳高度角、方位角
- **辐照度计算**: 计算直射辐照度(DNI)、散射辐照度(DHI)、全球水平辐照度(GHI)、倾斜面辐照度(POA)
- **理论功率计算**: 考虑温度修正、系统效率等因素计算理论发电功率

### 2. 性能对比分析
- **实际vs理论对比**: 计算性能比(实际功率/理论功率)
- **功率损失分析**: 量化各种因素导致的功率损失
- **性能模式识别**: 识别季节性变化和日内波动模式

### 3. 多维度可视化
- **功率对比图**: 实际功率vs理论功率散点图、时间序列图
- **季节性分析**: 季节性功率分布、性能比变化、辐照度对比
- **日内变化**: 日内功率曲线、性能比变化、热力图分析
- **环境影响**: 温度、湿度、风速对性能的影响分析

## 📁 文件结构

```
p1/
├── README.md                           # 项目说明文档
├── main_analysis.py                    # 主分析脚本 (推荐使用)
├── solar_theoretical_model.py          # 太阳辐照理论模型
├── performance_visualization.py        # 性能可视化模块
└── results/                           # 分析结果目录
    ├── data/                          # 数据文件
    │   ├── station01_theoretical_vs_actual.csv
    │   ├── station04_theoretical_vs_actual.csv
    │   └── stations_performance_comparison.csv
    ├── figures/                       # 可视化图表
    │   ├── station01_功率对比概览分析.png
    │   ├── station01_季节性分析.png
    │   ├── station01_日内变化分析.png
    │   └── station01_天气影响分析.png
    └── comprehensive_analysis_report.md # 综合分析报告
```

## 🚀 快速开始

### 方法1: 运行完整分析 (推荐)

```bash
cd p1
python main_analysis.py
```

这将自动完成：
1. 选择代表性站点进行分析
2. 计算理论性能和实际性能对比
3. 生成全套可视化图表
4. 创建综合分析报告

### 方法2: 单独运行模块

```bash
# 1. 计算理论性能
python solar_theoretical_model.py

# 2. 生成可视化分析
python performance_visualization.py
```

## 📊 分析结果说明

### 1. 数据文件 (.csv)
- `*_theoretical_vs_actual.csv`: 包含实际功率、理论功率、性能比等详细数据
- `stations_performance_comparison.csv`: 多站点性能对比汇总

### 2. 可视化图表 (.png)
- **功率对比概览**: 实际vs理论功率散点图、性能比分布、功率差值时间序列
- **季节性分析**: 季节性功率分布、性能比变化、月度趋势、辐照度对比
- **日内变化**: 日内功率曲线、性能比变化、小时-月份热力图、功率损失分析
- **天气影响**: 温度、湿度、风速对性能的影响、辐照度对比

### 3. 综合报告 (.md)
包含主要发现、结论和建议的Markdown格式报告

## 🔍 核心发现

### 季节变化特征 (长周期)
- 太阳高度角随季节变化，直接影响辐照强度和发电功率
- 夏季发电性能通常优于冬季
- 春秋季节表现出过渡性特征

### 日内波动特征 (短周期)
- 发电功率呈现明显的日内变化模式
- 中午时段发电效率最高
- 早晚时段受太阳高度角影响较大

### 环境因素影响
- 云层遮挡、天气变化对实际发电功率影响显著
- 温度、湿度、风速等气象因素对性能有不同程度影响
- 设备效率、灰尘积累等因素造成额外功率损失

## 🛠️ 技术特点

### 1. 精确的太阳位置计算
- 考虑地球轨道偏心率修正
- 精确的太阳赤纬角和时角计算
- 地理位置和时区修正

### 2. 完整的辐照度模型
- 大气质量和透射率计算
- 直射、散射、反射分量分析
- 倾斜面辐照度精确计算

### 3. 实用的性能评估
- 温度系数修正
- 系统效率因子考虑
- 多维度性能指标

### 4. 丰富的可视化分析
- 多层次图表展示
- 交互式数据探索
- 专业的分析报告

## 📈 性能指标

### 主要指标
- **性能比 (Performance Ratio)**: 实际功率/理论功率
- **功率损失**: 理论功率 - 实际功率
- **容量因子**: 实际发电量/额定容量发电量

### 评估标准
- 性能比 > 0.8: 优秀 🌟
- 性能比 > 0.7: 良好 👍
- 性能比 > 0.6: 一般 ⚠️
- 性能比 ≤ 0.6: 较差 ❌

## 🔧 自定义配置

### 修改分析站点
在 `main_analysis.py` 中修改：
```python
target_stations = ["station01", "station04", "station09"]  # 修改为你想分析的站点
```

### 调整模型参数
在 `solar_theoretical_model.py` 中的 `SolarTheoreticalModel` 类中调整：
- `atmospheric_transmittance`: 大气透射率 (默认0.75)
- `efficiency_factor`: 系统效率因子 (默认0.85)
- `temp_coefficient`: 温度系数 (默认-0.004)

### 自定义可视化
在 `performance_visualization.py` 中的 `PerformanceVisualizer` 类中添加新的分析图表

## 💡 使用建议

1. **数据质量检查**: 运行前确保PVOD数据集完整且格式正确
2. **结果验证**: 对比理论计算结果与已知的物理规律
3. **参数调优**: 根据实际情况调整模型参数
4. **扩展分析**: 基于现有框架添加更多分析维度

## 🎯 应用价值

### 1. 运维优化
- 识别性能异常时段和原因
- 制定针对性的维护计划
- 优化运行策略

### 2. 性能监控
- 建立性能基准线
- 实时监控偏差
- 预警系统建设

### 3. 预测建模
- 基于理论模型的发电预测
- 考虑环境因素的修正
- 提高预测精度

### 4. 投资决策
- 评估光伏电站实际性能
- 量化各种损失因子
- 支持投资和运营决策

## 📞 技术支持

如有问题或建议，请查看：
1. 代码注释和文档字符串
2. 生成的分析报告
3. 可视化图表中的说明信息

---

**注**: 本系统专门针对问题1设计，通过理论vs实际功率对比深入理解光伏电站发电行为，为后续的预测建模和优化提供基础。 